<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon Jan 22 22:28:19 2024 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>ainsl</title>

</head>
<body>

<h1 align="center">ainsl</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#EXIT CODES">EXIT CODES</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">ainsl -
AppendIfNoSuchLine</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>ainsl</b>
[<i>options</i>] <i>FILE LINE [PATTERN]</i></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Add LINE to the
end of FILE if the file does not contain the line already.
If PATTERN is given, then the LINE is only appended if
PATTERN is not found in the file.</p>

<p style="margin-left:11%; margin-top: 1em">Since ainsl is
written in Perl, you can use Perl&rsquo;s regular
expressions in PATTERN. If PATTERN is not supplied, LINE is
used instead for matching a line in FILE. LINE may also
contain the anchors &rsquo;^&rsquo; and &rsquo;$&rsquo;
which are only treated specially at the beginning or end of
the pattern and are used for matching, not when adding the
line. Additionally, the following characters are escaped in
LINE: ( ) +</p>

<p style="margin-left:11%; margin-top: 1em">The exit code
returned by ainsl is 0 on success and non-zero on error. See
the section EXIT CODES.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>-a</b></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">Autocreate file if it does not
exist.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-D</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Create debugging output.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-h</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Show help, version and summary of options.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-n</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Print the actions, but do not execute them.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-Q</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Quote all metacharacters in pattern. Uses perl&rsquo;s
\Q function.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-q</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Quote * and + metacharacters in pattern.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-s</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Convert white space in LINE or PATTERN to
&rsquo;\s+&rsquo; regexp for matching.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-N</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Don&rsquo;t prepend &rsquo;$AINSL_TARGET/&rsquo; to
filename, even if it is set.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-v</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Create verbose output.</p></td></tr>
</table>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If the variable
AINSL_TARGET is defined, its value will become the prefix
for the filename. This is used in FAI for changing files in
/target without specifying /target in the file name.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">ainsl -v
/etc/fstab &rsquo;/dev/fd0 /floppy auto users,noauto 0
0&rsquo;</p>

<p style="margin-left:11%; margin-top: 1em">Append the
entry for the floppy device to /etc/fstab, if the line
isn&rsquo;t already present. If the line is already in
/etc/fstab, but is commented out it will not be added unless
you extend the pattern to match only at the beginning of the
line:</p>

<p style="margin-left:11%; margin-top: 1em">ainsl -v
/etc/fstab &rsquo;^/dev/fd0 /floppy auto users,noauto 0
0&rsquo;</p>

<p style="margin-left:11%; margin-top: 1em">ainsl -s
/etc/exports &rsquo;/srv/www @linuxhosts(async,rw)
backup(async,ro)&rsquo;</p>

<p style="margin-left:11%; margin-top: 1em">Add exports
entry without exactly matching spaces.</p>

<h2>EXIT CODES
<a name="EXIT CODES"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>0</b></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">Success: Either FILE contains
the LINE/PATTERN or LINE was appended to FILE.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>13</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Permissions do not allow writing to FILE and
LINE/PATTERN was not found in file.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>28</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>FILE cannot be written because the filesystem has no
space and LINE/PATTERN was not found in file.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>30</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>FILE cannot be written because the filesystem is
read-only and LINE/PATTERN was not found in file.</p></td></tr>
</table>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This is a
similar function to AppendIfNoSuchLine from cfengine(8).</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This program is
part of FAI (Fully Automatic Installation). See the FAI
manual for more information on how to use ainsl. The FAI
homepage is https://fai-project.org.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Thomas Lange
&lt;lange@cs.uni-koeln.de&gt;</p>
<hr>
</body>
</html>
